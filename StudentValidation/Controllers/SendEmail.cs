using System; using System.Collections.Generic; using System.Linq; using System.Web; using System.Web.Mvc; using System.Net.Mail; using System.Net; using System.IO;  namespace StudentValidation.Controllers {     public class SendEmail : Controller     {          public ActionResult Index() { return View(); }           [HttpPost]         public ActionResult Email(StudentValidation.Models.EmailModel objEmailModel, HttpPostedFileBase fileUploader)         {              if (ModelState.IsValid)             {                 string From = "nadia.karreem@gmail.com"; //example                  using (MailMessage mail = new MailMessage(From, objEmailModel.to))                 {                     mail.Subject = objEmailModel.subject;                     mail.Body = objEmailModel.body;                      if (fileUploader != null)                     {                         string FileName = Path.GetFileName(fileUploader.FileName);                         mail.Attachments.Add(new Attachment(fileUploader.InputStream, FileName));                      }                      mail.IsBodyHtml = false;                      SmtpClient smtp = new SmtpClient();                      smtp.Host = "smtp.gmail.com";                      smtp.EnableSsl = true;                      NetworkCredential networkCredential = new NetworkCredential(From, "Pink Flamingo");                      smtp.UseDefaultCredentials = true;                      smtp.Credentials = networkCredential;                      smtp.Port = 587;                      smtp.Send(mail);                      ViewBag.Message = "Email sent";                     return View("Email", objEmailModel);                 }              }              else { return View(); }          }      } } 